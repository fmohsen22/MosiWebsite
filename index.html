<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta content="width=device-width, initial-scale=1.0" name="viewport">
    <title>Envisage Cosmetic Clinic</title>
    <style>
        /* General Styling */
        body {
            font-family: Arial, sans-serif;
            background-color: #FAEBD7;
            margin: 0;
            padding: 0;
            color: #333;
        }

        /* Header with Logo */
        header {
            background-color: #5a4023;
            color: #d4af37;
            padding: 20px;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .logo {
            height: 150px; /* Increase height */
            width: auto;   /* Keep proportions */
            margin-right: 10px;
        }


        h1 {
            margin: 0;
            font-size: 3em;
            flex-grow: 1;
            text-align: center;
        }

        /* Navigation Menu */
        nav {
            background-color: #bfb091;
            padding: 10px 0;
        }

        nav ul {
            list-style-type: none;
            margin: 0;
            padding: 0;
            display: flex;
            justify-content: center;
            gap: 20px;
        }

        nav ul li a {
            color: #333;
            text-decoration: none;
            font-size: 1.2em;
            padding: 10px;
        }

        nav ul li a:hover {
            text-decoration: underline;
        }

        /* Hero Section Styling */
        .hero-section {
            position: relative;
            text-align: center;
            color: white;
            height: 60vh;
            overflow: hidden;
        }

        .hero-overlay {
            background: rgba(0, 0, 0, 0.4);
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }

        .hero-image {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .hero-text {
            font-size: 2em;
            margin: 0;
            padding: 10px;
        }

        /* Clocks Section */
        .clock-container {
            display: flex;
            justify-content: center;
            gap: 30px;
            margin: 20px 0;
        }

        .clock {
            font-size: 1.2em;
            font-weight: bold;
            background-color: #d2b48c;
            color: #333;
            padding: 10px 20px;
            border-radius: 8px;
        }

        /* Chat Widget Styles */
        .chat-widget {
            position: fixed;
            bottom: 20px;
            right: 20px;
            z-index: 1000;
        }

        .chat-button {
            background-color: #333;
            color: white;
            border: none;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            font-size: 1.5em;
            cursor: pointer;
            box-shadow: 0px 4px 8px rgba(0, 0, 0, 0.2);
        }

        .chat-modal {
            display: none;
            position: fixed;
            bottom: 80px;
            right: 20px;
            width: 300px;
            max-width: 90%;
            background-color: #fff;
            border-radius: 8px;
            box-shadow: 0px 4px 10px rgba(0, 0, 0, 0.2);
            z-index: 1001;
            flex-direction: column;
            overflow: hidden;
        }

        .chat-modal.show {
            display: flex;
        }

        .chat-modal-header {
            background-color: #333;
            color: white;
            padding: 10px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .chat-messages {
            padding: 10px;
            height: 200px;
            overflow-y: auto;
        }

        .chat-input-container {
            display: flex;
            padding: 10px;
            border-top: 1px solid #ddd;
        }

        .chat-input-container input {
            flex: 1;
            padding: 8px;
            border: 1px solid #ccc;
            border-radius: 4px;
        }

        .chat-input-container button {
            background-color: #333;
            color: white;
            border: none;
            padding: 8px 12px;
            margin-left: 5px;
            border-radius: 4px;
            cursor: pointer;
        }

        /* Photo Album Styling */
.photo-album {
    position: relative;
    max-width: 80%;
    margin: 20px auto;
    overflow: hidden;
    border: 3px solid #d4af37; /* Optional golden border */
    border-radius: 8px;
}

.slides img {
    width: 100%;
    display: none;
    transition: opacity 1s ease-in-out;
}

.slides img.active {
    display: block;
    opacity: 1;
}

/* Navigation Buttons */
button.prev,
button.next {
    position: absolute;
    top: 50%;
    transform: translateY(-50%);
    background-color: rgba(0, 0, 0, 0.5);
    color: #fff;
    border: none;
    padding: 10px;
    cursor: pointer;
    border-radius: 50%;
}

button.prev {
    left: 10px;
}

button.next {
    right: 10px;
}

button.prev:hover,
button.next:hover {
    background-color: rgba(0, 0, 0, 0.8);
}
/* Timing and Weather Block Styling */
.info-container {
    display: flex;
    justify-content: space-between;
    align-items: stretch; /* Ensures all children stretch to the same height */
    gap: 20px;
    margin: 20px auto;
    max-width: 90%; /* Keeps everything responsive */
    flex-wrap: wrap; /* Adjusts for smaller screens */
}

.clock-container,
.weather-forecast,
.traffic-info,
.important-info {
    display: flex;
    flex-direction: column;
    justify-content: flex-start; /* Align content to the top */
    padding: 20px;
    border-radius: 8px;
    background-color: #d2b48c;
    min-height: 200px; /* Ensures all blocks have the same height */
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1); /* Consistent shadow */
}

.clock-container {
    flex: 1; /* Share equal space */
    max-width: 250px;
    background: linear-gradient(135deg, #fdf6e3, #d2b48c); /* Soft gradient */
    color: #333;
    padding: 15px;
    border-radius: 12px;
    text-align: center;
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
    box-sizing: border-box; /* Includes padding in the height calculation */
    display: flex;
    flex-direction: column;
    justify-content: flex-start; /* Align content to the top */
    align-items: center;
    min-height: 200px; /* Consistent height with other blocks */
    margin: 0; /* Remove any margin affecting alignment */
}

.info-container {
    display: flex;
    justify-content: space-between;
    align-items: stretch; /* Aligns all items to start at the same level */
    gap: 20px;
    margin: 20px auto;
    max-width: 90%;
    flex-wrap: wrap;
    min-height: 200px; /* Ensures all blocks align to the same height */
}

.weather-forecast {
    flex: 1; /* Share space with other blocks */
    max-width: 250px;
    text-align: center;
}

.traffic-info {
    flex: 2; /* Make the traffic block larger */
    text-align: left;
}

.important-info {
    flex: 1;
    max-width: 250px;
    background-color: #f4c2c2;
    border: 2px solid #d33;
    text-align: center;
}

/* Reset Margins for Text Elements */
.clock-container .clock-item,
.weather-forecast h3,
.traffic-info h3,
.important-info h3 {
    margin: 0; /* Reset default margin */
    line-height: 1.5; /* Consistent spacing */
}

    </style>
</head>
<body>

<!-- Header with Logo and Title -->
<header>
    <img alt="Clinic Logo" class="logo" src="logo.png"> <!-- Replace with logo path -->
    <h1>Envisage Cosmetic Clinic</h1>
</header>

<!-- Hero Section for Image or Video -->
<section class="hero-section">
    <div class="hero-overlay">
        <p class="hero-text">Enhancing Your Beauty Journey</p>
    </div>
    <img alt="Hero Image" class="hero-image" src="backgroundImage.png"> <!-- Replace with image path -->
</section>

<!-- Timing and Weather Block -->
<div class="info-container">
    <div id="clockContainer" class="clock-container">
        <p id="sydneyClock">Sydney: --:--:--</p>
        <p id="currentDate">Date: --/--/----</p>
        <p class="motivation" id="motivationQuote">Believe in yourself!</p>
    </div>
    <div class="weather-forecast" id="weatherContainer">
        <h3>Weather in Sydney</h3>
        <p id="weatherDetails">Loading...</p>
    </div>
    <div class="traffic-info" id="parkingInfo">
        <h3>Traffic & Parking Info</h3>
        <p id="trafficDetails">Loading traffic and parking details...</p>
    </div>
    <div class="important-info" id="importantInfoContainer">
        <h3>Important Info</h3>
        <p id="importantInfoDetails">Loading important information...</p>
    </div>
</div>


<!-- Navigation Menu -->
<nav>
    <ul>
        <li><a href="index.html">Home</a></li>
        <li><a href="services.html">Services & Price List</a></li>
        <li><a href="calendar.html">Time Booking</a></li>
        <li><a href="contact.html">Contact</a></li>
    </ul>
</nav>


<!-- Photo Album Section -->
<div class="photo-album">
    <div class="slides">
        <img alt="Photo 1" class="active" src="photoalbum/photo_1.png">
        <img alt="Photo 2" src="photoalbum/Photo_2.png">
        <img alt="Photo 3" src="photoalbum/Photo_3.png">
        <img alt="Photo 4" src="photoalbum/Photo_4.png">
        <img alt="Photo 5" src="photoalbum/Photo_5.png">
        <img alt="Photo 6" src="photoalbum/Photo_6.png">
        <img alt="Photo 7" src="photoalbum/Photo_7.png">
    </div>
    <!-- Optional: Add navigation buttons -->
    <button class="prev" onclick="prevSlide()">&#10094;</button>
    <button class="next" onclick="nextSlide()">&#10095;</button>
</div>


<!-- Chat Widget -->
<div class="chat-widget">
    <button class="chat-button" onclick="toggleChat()">💬</button>
    <div class="chat-modal" id="chatModal">
        <div class="chat-modal-header">
            <span>Chat with us</span>
            <button class="close-chat" onclick="toggleChat()">✖</button>
        </div>
        <div class="chat-messages" id="chatMessages"></div>
        <div class="chat-input-container">
            <input id="userInput" placeholder="Type a message" type="text">
            <button onclick="sendMessage()">Send</button>
        </div>
    </div>
</div>

<script>
    function toggleChat() {
        document.getElementById('chatModal').classList.toggle('show');
    }

    async function sendMessage() {
    const input = document.getElementById('userInput');
    const message = input.value;
    if (message.trim() === '') return;

    // Display user's message
    const chatMessages = document.getElementById('chatMessages');
    const userMessage = document.createElement('div');
    userMessage.textContent = "You: " + message;
    chatMessages.appendChild(userMessage);
    input.value = '';

    try {
        // Send message to the API
        const response = await fetch('https://apiwebsite-1.onrender.com/api/chat/message', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json'
            },
            body: JSON.stringify({ text: message })
        });

        if (response.ok) {
            const data = await response.json();
            console.log("API Response:", data); // Debugging: Log the entire response

            // Display bot's response from the API
            const botMessage = document.createElement('div');
            botMessage.textContent = "Bot: " + data.reply; // Access the "reply" field in the response JSON
            chatMessages.appendChild(botMessage);
        } else {
            throw new Error("API returned a non-200 status");
        }
    } catch (error) {
        console.error("Error sending message to API:", error);
        const errorMessage = document.createElement('div');
        errorMessage.textContent = "Error: Unable to connect to the chat service. 😥";
        chatMessages.appendChild(errorMessage);
    }
}


    async function updateTime() {
        try {
            const response = await fetch("https://apiwebsite-1.onrender.com/api/time");
            const times = await response.json();
            document.getElementById("sydneyClock").textContent = "SydneyTime: " + times.sydney;
        } catch (error) {
            console.error("Error fetching time data:", error);
        }
    }

    setInterval(updateTime, 1000);
    updateTime();

    // Function to fetch and display the weather with recommendations
async function updateWeather() {
    try {
        const response = await fetch(
            'https://api.weatherapi.com/v1/current.json?key=9ce0e65079f24178bf8143534240112&q=Sydney'
        );
        const data = await response.json();

        // Extract weather details
        const temperature = data.current.temp_c; // Temperature in Celsius
        const description = data.current.condition.text; // Weather description
        const icon = "https:" + data.current.condition.icon; // Full URL for the weather icon
        const windSpeed = data.current.wind_kph; // Wind speed in kph

        // Generate recommendations
        let recommendation = "Have a great day!";
        if (description.toLowerCase().includes("rain")) {
            recommendation = "It might rain! Don't forget to bring an umbrella or a raincoat.";
        } else if (temperature < 15) {
            recommendation = "It's quite cold outside. Wear warm clothes!";
        } else if (windSpeed > 30) {
            recommendation = "It's windy today. Secure your belongings and dress appropriately.";
        }

        // Update weather details on the page
        document.getElementById("weatherDetails").innerHTML = `
            <img src="${icon}" alt="Weather Icon" style="vertical-align: middle; margin-right: 10px;">
            ${description}, ${temperature}°C
        `;
    } catch (error) {
        console.error("Error fetching weather data:", error);
        document.getElementById("weatherDetails").textContent = "Unable to fetch weather data.";
    }
}

// Initial fetch and periodic updates every 5 minutes
updateWeather();
setInterval(updateWeather, 300000); // Update every 5 minutes



// update date
function updateDateTime() {
    const now = new Date();

    // Format time (HH:MM:SS)
    //const time = now.toLocaleTimeString("en-AU", { hour12: false });

    // Format date (DD/MM/YYYY)
    const date = now.toLocaleDateString("en-AU", { day: "2-digit", month: "2-digit", year: "numeric" });

    //document.getElementById("sydneyClock").textContent = `Sydney: ${time}`;
    document.getElementById("currentDate").textContent = `Date: ${date}`;
}

// Update every second for the clock
setInterval(updateDateTime, 1000);
updateDateTime();

    //traffic info
    //exaple json:
    //{
    //"inf": "Currently, George Street has moderate traffic. Parking is available near the CBD with limited spots."
    //}




async function getTrafficAndParkingInfo() {
    try {
        // Fetch parking info from the first API endpoint
        const parkingResponse = await fetch('https://apiwebsite-1.onrender.com/api/freeslots_in_parking');

        if (!parkingResponse.ok) {
            throw new Error(`HTTP error! status: ${parkingResponse.status}`);
        }

        const parkingData = await parkingResponse.json();
        const parkingInfo = parkingData.inf || "No parking information available.";

        // Update the parking info
        document.getElementById("trafficDetails").textContent = parkingInfo;

        // Fetch traffic report from the second API endpoint
        const trafficResponse = await fetch('https://apiwebsite-1.onrender.com/api/trafficReport');

        if (!trafficResponse.ok) {
            throw new Error(`HTTP error! status: ${trafficResponse.status}`);
        }

        const trafficData = await trafficResponse.json();
        const trafficInfo = trafficData.inf || "No traffic information available.";

        // Append traffic report to the same traffic-info box
        const trafficDetails = document.getElementById("trafficDetails");
        const trafficReportElement = document.createElement("p");
        trafficReportElement.textContent = trafficInfo;
        trafficDetails.appendChild(trafficReportElement);

    } catch (error) {
        console.error("Error fetching traffic and parking info:", error);
        document.getElementById("trafficDetails").textContent =
            "Unable to fetch traffic and parking information.";
    }
}

// Call the function on page load
getTrafficAndParkingInfo();

// Optional: Set up periodic updates (e.g., every 5 minutes)
setInterval(getTrafficAndParkingInfo, 300000); // Update every 5 minutes

    //important info
    //example
    //{
    //"message": "The shop is closed today due to maintenance."
    //}
    //}

    async function updateImportantInfo() {
    try {
        // Replace this URL with your actual API endpoint
        const response = await fetch('https://api.example.com/important-info');
        const data = await response.json();

        // Example structure: { message: "The shop is closed today due to maintenance." }
        const importantMessage = data.message;

        // Update the important info block
        document.getElementById("importantInfoDetails").textContent = importantMessage;
    } catch (error) {
        console.error("Error fetching important info:", error);
        document.getElementById("importantInfoDetails").textContent = "Unable to fetch important information.";
    }
}

// Fetch important info every 10 minutes
updateImportantInfo();
setInterval(updateImportantInfo, 600000); // 600,000ms = 10 minutes

</script>

<script>
    //photo Album
    let currentSlide = 0;
    const slides = document.querySelectorAll('.slides img');

    function showSlide(index) {
        slides.forEach((slide, i) => {
            slide.classList.remove('active');
            if (i === index) slide.classList.add('active');
        });
    }

    function nextSlide() {
        currentSlide = (currentSlide + 1) % slides.length;
        showSlide(currentSlide);
    }

    function prevSlide() {
        currentSlide = (currentSlide - 1 + slides.length) % slides.length;
        showSlide(currentSlide);
    }

    // Automatically transition slides every 5 seconds
    setInterval(nextSlide, 5000);

    // Show the first slide on page load
    showSlide(currentSlide);
</script>

<script>
    function displayMotivationalQuote() {
    const quotes = [
        "Make today beautiful!",
        "The journey of a thousand miles begins with a single step.",
        "Every day is a second chance.",
        "Success is not final, failure is not fatal: It is the courage to continue that counts.",
        "Believe you can, and you're halfway there.",
        "Dream big and dare to fail.",
        "Happiness is not by chance, but by choice.",
        "The best way to predict the future is to create it."
    ];

    // Select a random quote
    const randomQuote = quotes[Math.floor(Math.random() * quotes.length)];

    // Update the quote in the HTML
    document.getElementById("motivationQuote").textContent = randomQuote;
}

// Call the function on page load
displayMotivationalQuote();

// Optional: Update the quote every hour
setInterval(displayMotivationalQuote, 3600000); // 1 hour in milliseconds
</script>

</body>
</html>
